<!doctype HTML>
<html>
	<head>
		<meta name="viewport" content="width=320, initial-scale=1">
		<link rel="stylesheet" href="stylesheets/stylesheet.css">
		<script src="scripts/google-keys.js"></script>
		<script>
			// Initialize the client, set onclick listeners.
			function initialize() 
			{
				gapi.client.setApiKey(apiKey);
				window.setTimeout(function() { auth(true); }, 1);
			}

			// Run OAuth 2.0 authorization.
			function auth(immediate) 
			{
				gapi.auth.authorize(
				{
					client_id: clientId,
					scope: scopes,
					immediate: immediate
				}
				, handleAuthResult);
			}

			// Handle the results of the OAuth 2.0 flow.
			function handleAuthResult(authResult) 
			{
				var authorizeButton = document.getElementById('authorize-button');
				if (authResult) 
				{
					authorizeButton.disabled = true;
					window.location = 'observe.html'
				} 
				else 
				{
					authorizeButton.disabled = false;
					authorizeButton.onclick = function() { auth(false); return false; };
				}
			}
		</script>
		<script src="https://apis.google.com/js/client.js?onload=initialize"></script>
	</head>
	<body>
		<div id="wrapper">
			<h1>Trapp</h1>
			<div class="boxp">
				<p>
					Welcome to Trapp - the Tree Observation and Mapping App
				</p>
				<p>
					Before you start you need to login using your Google account. That is because Trapp saves your observations to a Google database.
				</p>
				<p>
					After you login you will see the observation screen where you can start mapping trees!
				</p>
			</div>
			<input type="button" id="authorize-button" value="" class="google">
		</div>
	</body>
</html>